
<h1 class="sectionedit1" id="managing_assets_in_feathers_themes">Managing Assets in Feathers Themes</h1>
<div class="level1">

<p>
There are two primary approaches to managing assets (such as textures or bitmap fonts) in Feathers themes. You can embed assets in the SWF or you can load assets at runtime.
</p>

</div>
<!-- EDIT1 SECTION "Managing Assets in Feathers Themes" [1-225] -->
<h2 class="sectionedit2" id="embedded_assets">Embedded Assets</h2>
<div class="level2">

<p>
The first approach packages everything up in one place by embedded the assets into the final SWF (or SWC) with the compiled code. The assets are preloaded and ready to instantiate and use as needed.
</p>

<p>
It&#039;s the easiest way for beginners to get started with the Feathers example themes. Just drop a SWC into your project, and instantiate the theme:
</p>
<pre class="code as3"><span class="kw1">new</span> MetalWorksMobileTheme<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
However, this approach requires more memory. The Flash runtimes store the full running SWF in memory at all times. When an embedded asset is instantiated, the memory for that asset is duplicated from the SWF, essentially doubling the memory.
</p>

<p>
The example themes have small texture atlases, so this impact will be low, but more advanced custom themes may require a much larger amount of memory.
</p>

</div>
<!-- EDIT2 SECTION "Embedded Assets" [226-1045] -->
<h2 class="sectionedit3" id="loading_assets_at_runtime">Loading Assets at Runtime</h2>
<div class="level2">

<p>
The second approach keeps the assets separate from the code by using the Starling <code>AssetManager</code> to load assets at rutnime. The assets can be loaded from a <abbr title="Uniform Resource Locator">URL</abbr>, and in AIR, the assets can also be loaded from the file system. The memory usage is lower because the assets will only appear in memory once, unlike when they are embedded. However, setting up the theme to use an asset manager is a little more complicated.
</p>

<p>
First, you need to specify the location of the assets. In an AIR app, you need to include the asset files when packaging your app. <code>MetalWorksMobileThemeWithAssetManager</code> requires two files:
</p>
<ul>
<li class="level1"><div class="li"> images/metalworks.xml</div>
</li>
<li class="level1"><div class="li"> images/metalworks.png</div>
</li>
</ul>

<p>
In the following example, we tell the theme that the <code>images</code> folder (which contains the two files) are placed in <code>File.applicationDirectory</code>:
</p>
<pre class="code as3"><span class="kw2">var</span> theme<span class="sy0">:</span>MetalWorksMobileThemeWithAssetManager =
	<span class="kw1">new</span> MetalWorksMobileThemeWithAssetManager<span class="br0">&#40;</span> File<span class="sy0">.</span>applicationDirectory<span class="sy0">.</span><span class="kw7">url</span> <span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
<p><div class="noteclassic">
You don&#039;t necessarily need to add the assets directly to <code>File.applicationDirectory</code>. You might want to add them to a subdirectory instead. Flash Builder and other IDEs should allow you to specify the location of included files, and you can also specify the included files when packaging with the ADT command line tool.

</div></p>
</p>

<p>
Next, let&#039;s add a listener to the theme for <code>Event.COMPLETE</code>:
</p>
<pre class="code as3">theme<span class="sy0">.</span><span class="kw7">addEventListener</span><span class="br0">&#40;</span> <a href="http://www.google.com/search?q=event%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:event.html"><span class="kw5">Event</span></a><span class="sy0">.</span><span class="kw8">COMPLETE</span><span class="sy0">,</span> theme_completeHandler <span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
This event will be dispatched when the asset manager has finished loading all of the assets, and the theme is ready to start skinning Feathers components. In other words, you should always wait until the theme dispatches this event before you start showing any of your app&#039;s user interface. Otherwise, the theme won&#039;t have textures and things ready to provide skins.
</p>

<p>
The listener for this event might look something like this:
</p>
<pre class="code as3"><span class="kw1">private</span> <span class="kw3">function</span> theme_completeHandler<span class="br0">&#40;</span> event<span class="sy0">:</span><a href="http://www.google.com/search?q=event%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:event.html"><span class="kw5">Event</span></a> <span class="br0">&#41;</span><span class="sy0">:</span><span class="kw1">void</span>
<span class="br0">&#123;</span>
	<span class="co1">// the theme is ready!</span>
&nbsp;
	<span class="kw1">this</span><span class="sy0">.</span>button = <span class="kw1">new</span> Button<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
	<span class="kw1">this</span><span class="sy0">.</span>button<span class="sy0">.</span>label = <span class="st0">&quot;Click Me&quot;</span><span class="sy0">;</span>
	<span class="kw1">this</span><span class="sy0">.</span><span class="kw7">addChild</span><span class="br0">&#40;</span> button <span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>

<p>
<p><div class="noteclassic">
Other themes will require their own set of files. The main thing to keep in mind is that you need to point to what the theme considers the root directory of its assets. In the case of <code>MetalWorksMobileThemeWithAssetManager</code>, that isn&#039;t actually the <code>images</code> directory, but its parent directory instead.
</p>

<p>
In future versions of Feathers, this theme might require additional assets that are in a directory next to the <code>images</code> directory, so we want to keep it flexible. As an example, <code>MinimalMobileThemeWithAssetManager</code> requires these files:
</p>
<ul>
<li class="level1"><div class="li"> images/minimal.xml</div>
</li>
<li class="level1"><div class="li"> images/minimal.png</div>
</li>
<li class="level1"><div class="li"> fonts/pf_ronda_seven.fnt</div>
</li>
</ul>

<p>
As you can see, the bitmap font file that <code>MinimalMobileThemeWithAssetManager</code> uses is in a separate directory from the image files. The parent directory of <code>images</code> and <code>fonts</code> is the real “root” directory for this theme&#039;s files.

</div></p>
</p>

</div>
<!-- EDIT3 SECTION "Loading Assets at Runtime" [1046-4038] -->
<h3 class="sectionedit4" id="loading_assets_with_a_custom_asset_manager">Loading assets with a custom asset manager</h3>
<div class="level3">

<p>
By default, the theme will create its own <code>AssetManager</code>. If you would like to load extra assets that the theme isn&#039;t aware of, you may optionally pass in your own asset manager to the example theme&#039;s constructor:
</p>
<pre class="code as3"><span class="kw2">var</span> assets<span class="sy0">:</span>AssetManager = <span class="kw1">new</span> AssetManager<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
assets<span class="sy0">.</span>enqueue<span class="br0">&#40;</span> File<span class="sy0">.</span>applicationDirectory<span class="sy0">.</span>resolvePath<span class="br0">&#40;</span> <span class="st0">&quot;./images/custom-asset.png&quot;</span> <span class="br0">&#41;</span> <span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">var</span> theme<span class="sy0">:</span>MetalWorksMobileThemeWithAssetManager =
	<span class="kw1">new</span> MetalWorksMobileThemeWithAssetManager<span class="br0">&#40;</span> File<span class="sy0">.</span>applicationDirectory<span class="sy0">.</span><span class="kw7">url</span><span class="sy0">,</span> assets <span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
theme<span class="sy0">.</span><span class="kw7">addEventListener</span><span class="br0">&#40;</span> <a href="http://www.google.com/search?q=event%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:event.html"><span class="kw5">Event</span></a><span class="sy0">.</span><span class="kw8">COMPLETE</span><span class="sy0">,</span> theme_completeHandler <span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
Add all of extra assets that you need before passing the asset manager to the theme.
</p>

<p>
<p><div class="notewarning">
Never call the <code><a href="http://doc.starling-framework.org/core/starling/utils/AssetManager.html#loadQueue()" class="urlextern" title="http://doc.starling-framework.org/core/starling/utils/AssetManager.html#loadQueue()"  rel="nofollow">loadQueue()</a></code> function on the <code>AssetManager</code> that you pass to a theme. The theme must call it for you because the asset manager does not dispatch any kind of complete event that the theme can listen to, and the theme needs to know when its assets are ready. If you need to know when the assets are fully loaded, listen for <code>Event.COMPLETE</code> on the theme.

</div></p>
</p>

</div>
<!-- EDIT4 SECTION "Loading assets with a custom asset manager" [4039-5238] -->
<h2 class="sectionedit5" id="related_links">Related Links</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="/feathers/themes" class="wikilink1" title="feathers:themes">Introduction to Feathers Themes</a></div>
</li>
<li class="level1"><div class="li"> <a href="/manual/asset_management" class="wikilink1" title="manual:asset_management">Starling Framework: Asset Management</a></div>
</li>
</ul>

<p>
For more tutorials, return to the <a href="/feathers/start" class="wikilink1" title="feathers:start">Feathers Documentation</a>.
</p>

</div>
<!-- EDIT5 SECTION "Related Links" [5239-] -->