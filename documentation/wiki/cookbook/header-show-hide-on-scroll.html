
<h1 class="sectionedit1" id="feathers_cookbookshow_or_hide_a_header_when_scrolling_a_list_or_container">Feathers Cookbook: Show or hide a header when scrolling a list or container</h1>
<div class="level1">

<p>
In order to show as much content as possible, some mobile UIs will only reveal a header when it is required, and the header will slide out of view when scrolling. Most commonly, you might recognize this behavior in a mobile web browser.
</p>

</div>
<!-- EDIT1 SECTION "Feathers Cookbook: Show or hide a header when scrolling a list or container" [1-329] -->
<h2 class="sectionedit2" id="the_layout">The Layout</h2>
<div class="level2">

<p>
Let&#039;s start by defining the <code><a href="/feathers/header" class="wikilink1" title="feathers:header">Header</a></code> and <code><a href="/feathers/list" class="wikilink1" title="feathers:list">List</a></code> components as member variables:
</p>
<pre class="code as3"><span class="kw1">private</span> <span class="kw2">var</span> _header<span class="sy0">:</span>Header<span class="sy0">;</span>
<span class="kw1">private</span> <span class="kw2">var</span> _list<span class="sy0">:</span>List<span class="sy0">;</span></pre>

<p>
Next, we&#039;ll instantiate them and set some basic properties:
</p>
<pre class="code as3"><span class="kw1">this</span><span class="sy0">.</span>_header = <span class="kw1">new</span> Header<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">this</span><span class="sy0">.</span>_header<span class="sy0">.</span>title = <span class="st0">&quot;Test&quot;</span><span class="sy0">;</span>
<span class="kw1">this</span><span class="sy0">.</span><span class="kw7">addChild</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="sy0">.</span>_header<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//some basic sample data for the list</span>
<span class="kw2">var</span> items<span class="sy0">:</span><a href="http://www.google.com/search?q=array%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:array.html"><span class="kw5">Array</span></a> = <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">;</span>
<span class="kw1">for</span><span class="br0">&#40;</span><span class="kw2">var</span> i<span class="sy0">:</span><a href="http://www.google.com/search?q=int%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:int.html"><span class="kw5">int</span></a> = <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> <span class="nu0">100</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	items<span class="sy0">.</span><span class="kw7">push</span><span class="br0">&#40;</span><span class="br0">&#123;</span>label<span class="sy0">:</span> i<span class="sy0">.</span><span class="kw7">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
<span class="kw1">this</span><span class="sy0">.</span>_list = <span class="kw1">new</span> List<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">this</span><span class="sy0">.</span>_list<span class="sy0">.</span>dataProvider = <span class="kw1">new</span> ListCollection<span class="br0">&#40;</span>items<span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">this</span><span class="sy0">.</span><span class="kw7">addChild</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="sy0">.</span>_list<span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
Now, we&#039;re ready to add the layout code. We&#039;ll use <code><a href="/feathers/anchor-layout" class="wikilink1" title="feathers:anchor-layout">AnchorLayout</a></code> to position a header and a list, with the list&#039;s position relative to the header. The header and list should be placed inside a container that supports layouts, such as <a href="/feathers/layout-group" class="wikilink1" title="feathers:layout-group">LayoutGroup</a>.
</p>
<pre class="code as3"><span class="kw1">this</span><span class="sy0">.</span>layout = <span class="kw1">new</span> AnchorLayout<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">var</span> headerLayoutData<span class="sy0">:</span>AnchorLayoutData = <span class="kw1">new</span> AnchorLayoutData<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
headerLayoutData<span class="sy0">.</span><span class="kw7">top</span> = <span class="nu0">0</span><span class="sy0">;</span>
headerLayoutData<span class="sy0">.</span><span class="kw7">right</span> = <span class="nu0">0</span><span class="sy0">;</span>
headerLayoutData<span class="sy0">.</span><span class="kw7">left</span> = <span class="nu0">0</span><span class="sy0">;</span>
<span class="kw1">this</span><span class="sy0">.</span>_header<span class="sy0">.</span>layoutData = headerLayoutData<span class="sy0">;</span>
&nbsp;
<span class="kw2">var</span> listLayoutData<span class="sy0">:</span>AnchorLayoutData = <span class="kw1">new</span> AnchorLayoutData<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
listLayoutData<span class="sy0">.</span><span class="kw7">top</span> = <span class="nu0">0</span><span class="sy0">;</span>
listLayoutData<span class="sy0">.</span>topAnchorDisplayObject = <span class="kw1">this</span><span class="sy0">.</span>_header<span class="sy0">;</span>
listLayoutData<span class="sy0">.</span><span class="kw7">right</span> = <span class="nu0">0</span><span class="sy0">;</span>
listLayoutData<span class="sy0">.</span><span class="kw7">bottom</span> = <span class="nu0">0</span><span class="sy0">;</span>
listLayoutData<span class="sy0">.</span><span class="kw7">left</span> = <span class="nu0">0</span><span class="sy0">;</span>
<span class="kw1">this</span><span class="sy0">.</span>_list<span class="sy0">.</span>layoutData = listLayoutData<span class="sy0">;</span></pre>

<p>
Notice that the top, right, and left edges of the header are anchored to its parent. We&#039;re going to change the value of the <code>top</code> anchor later when we want to change the header&#039;s <code>y</code> position, but to start out, the header will be fully visible.
</p>

<p>
The top of the list is anchored to the header. When the header moves, the list will move too. The other edges of the list are anchored to the edges of its parent. Since the list&#039;s bottom edge is anchored to its parent, and the top edge is anchored to the header, when the header moves, the list will not only move, but it will resize too.
</p>

</div>
<!-- EDIT2 SECTION "The Layout" [330-2352] -->
<h2 class="sectionedit3" id="showing_or_hiding_the_header_on_drag">Showing or hiding the header on drag</h2>
<div class="level2">

<p>
Let&#039;s add a listener to handle touches:
</p>
<pre class="code as3"><span class="kw1">this</span><span class="sy0">.</span>_list<span class="sy0">.</span><span class="kw7">addEventListener</span><span class="br0">&#40;</span>TouchEvent<span class="sy0">.</span>TOUCH<span class="sy0">,</span> list_touchHandler<span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
Before we implement the listener, we&#039;ll need a couple of member variables to track the state of the touch that is dragging the list:
</p>
<pre class="code as3"><span class="kw1">private</span> <span class="kw2">var</span> _touchID<span class="sy0">:</span><a href="http://www.google.com/search?q=int%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:int.html"><span class="kw5">int</span></a> = <span class="sy0">-</span><span class="nu0">1</span><span class="sy0">;</span>
<span class="kw1">private</span> <span class="kw2">var</span> _previousGlobalTouchY<span class="sy0">:</span><a href="http://www.google.com/search?q=number%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:number.html"><span class="kw5">Number</span></a><span class="sy0">;</span></pre>

<p>
Finally, let&#039;s write the listener that will reposition the header when the list is dragged:
</p>
<pre class="code as3"><span class="kw1">private</span> <span class="kw3">function</span> list_touchHandler<span class="br0">&#40;</span>event<span class="sy0">:</span>TouchEvent<span class="br0">&#41;</span><span class="sy0">:</span><span class="kw1">void</span>
<span class="br0">&#123;</span>
	<span class="kw1">if</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="sy0">.</span>_touchID <span class="sy0">&gt;</span>= <span class="nu0">0</span><span class="br0">&#41;</span>
	<span class="br0">&#123;</span>
		<span class="kw2">var</span> touch<span class="sy0">:</span>Touch = event<span class="sy0">.</span>getTouch<span class="br0">&#40;</span><span class="kw1">this</span><span class="sy0">.</span>_list<span class="sy0">,</span> <span class="kw1">null</span><span class="sy0">,</span> <span class="kw1">this</span><span class="sy0">.</span>_touchID<span class="br0">&#41;</span><span class="sy0">;</span>
		<span class="kw1">if</span><span class="br0">&#40;</span><span class="sy0">!</span>touch<span class="br0">&#41;</span>
		<span class="br0">&#123;</span>
			<span class="kw1">return</span><span class="sy0">;</span>
		<span class="br0">&#125;</span>
		<span class="kw1">if</span><span class="br0">&#40;</span>touch<span class="sy0">.</span>phase == TouchPhase<span class="sy0">.</span>MOVED<span class="br0">&#41;</span>
		<span class="br0">&#123;</span>
			<span class="kw1">this</span><span class="sy0">.</span>dragHeader<span class="br0">&#40;</span>touch<span class="br0">&#41;</span><span class="sy0">;</span>
		<span class="br0">&#125;</span>
		<span class="kw1">else</span> <span class="kw1">if</span><span class="br0">&#40;</span>touch<span class="sy0">.</span>phase == TouchPhase<span class="sy0">.</span>ENDED<span class="br0">&#41;</span>
		<span class="br0">&#123;</span>
			<span class="kw1">this</span><span class="sy0">.</span>_touchID = <span class="sy0">-</span><span class="nu0">1</span><span class="sy0">;</span>
		<span class="br0">&#125;</span>
	<span class="br0">&#125;</span>
	<span class="kw1">else</span>
	<span class="br0">&#123;</span>
		<span class="kw2">var</span> touch<span class="sy0">:</span>Touch = event<span class="sy0">.</span>getTouch<span class="br0">&#40;</span><span class="kw1">this</span><span class="sy0">.</span>_list<span class="sy0">,</span> TouchPhase<span class="sy0">.</span>BEGAN<span class="br0">&#41;</span><span class="sy0">;</span>
		<span class="kw1">if</span><span class="br0">&#40;</span><span class="sy0">!</span>touch<span class="br0">&#41;</span>
		<span class="br0">&#123;</span>
			<span class="kw1">return</span><span class="sy0">;</span>
		<span class="br0">&#125;</span>
		<span class="kw1">this</span><span class="sy0">.</span>_touchID = touch<span class="sy0">.</span>id<span class="sy0">;</span>
		<span class="kw1">this</span><span class="sy0">.</span>_previousGlobalTouchY = touch<span class="sy0">.</span>globalY<span class="sy0">;</span>
	<span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>

<p>
It&#039;s mostly boilerplate for tracking the appropriate touch ID. There are two important things to note. First, in the section for <code>TouchPhase.BEGAN</code>, we initialize the value of the <code>_previousGlobalTouchY</code> variable. Second, in the section for <code>TouchPhase.MOVED</code>, we call another function named <code>dragHeader()</code>. Let&#039;s implement that function now.
</p>
<pre class="code as3"><span class="kw1">private</span> <span class="kw3">function</span> dragHeader<span class="br0">&#40;</span>touch<span class="sy0">:</span>Touch<span class="br0">&#41;</span><span class="sy0">:</span><span class="kw1">void</span>
<span class="br0">&#123;</span>
	<span class="kw2">var</span> currentGlobalTouchY<span class="sy0">:</span><a href="http://www.google.com/search?q=number%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:number.html"><span class="kw5">Number</span></a> = touch<span class="sy0">.</span>globalY<span class="sy0">;</span>
	<span class="kw2">var</span> newPosition<span class="sy0">:</span><a href="http://www.google.com/search?q=number%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:number.html"><span class="kw5">Number</span></a> = <span class="kw1">this</span><span class="sy0">.</span>_header<span class="sy0">.</span><span class="kw7">y</span> <span class="sy0">+</span> currentGlobalTouchY <span class="sy0">-</span> <span class="kw1">this</span><span class="sy0">.</span>_previousGlobalTouchY<span class="sy0">;</span>
	<span class="kw2">var</span> minHeaderPosition<span class="sy0">:</span><a href="http://www.google.com/search?q=number%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:number.html"><span class="kw5">Number</span></a> = <span class="sy0">-</span><span class="kw1">this</span><span class="sy0">.</span>_header<span class="sy0">.</span><span class="kw7">height</span><span class="sy0">;</span>
	<span class="kw1">if</span><span class="br0">&#40;</span>newPosition <span class="sy0">&lt;</span> minHeaderPosition<span class="br0">&#41;</span>
	<span class="br0">&#123;</span>
		newPosition = minHeaderPosition<span class="sy0">;</span>
	<span class="br0">&#125;</span>
	<span class="kw1">if</span><span class="br0">&#40;</span>newPosition <span class="sy0">&gt;</span> <span class="nu0">0</span><span class="br0">&#41;</span>
	<span class="br0">&#123;</span>
		newPosition = <span class="nu0">0</span><span class="sy0">;</span>
	<span class="br0">&#125;</span>
	<span class="kw1">this</span><span class="sy0">.</span>_previousGlobalTouchY = currentGlobalTouchY<span class="sy0">;</span>
&nbsp;
	<span class="kw2">var</span> headerLayoutData<span class="sy0">:</span>AnchorLayoutData = AnchorLayoutData<span class="br0">&#40;</span><span class="kw1">this</span><span class="sy0">.</span>_header<span class="sy0">.</span>layoutData<span class="br0">&#41;</span><span class="sy0">;</span>
	headerLayoutData<span class="sy0">.</span><span class="kw7">top</span> = newPosition<span class="sy0">;</span>
<span class="br0">&#125;</span></pre>

<p>
The math is pretty simple here. The difference between the current <code>globalY</code> position of the touch, and the <code>_previousGlobalTouchY</code> variable is calculated and added to the <code>y</code> position of the header. The value is clamped so that the header can only be dragged over a range equal to its height and no higher than <code>0</code>. We then replace the value of <code>_previousGlobalTouchY</code> with the current <code>globalY</code> position of the touch.
</p>

<p>
The final calculated value replaces the <code>top</code> property of the <code>AnchorLayoutData</code> associated with the header. This drags the header, and because the list is positioned relative to the header, the list is dragged too.
</p>
<hr />

<p>
This is a recipe in the <a href="/feathers/cookbook/start" class="wikilink1" title="feathers:cookbook:start">Feathers Cookbook</a>. For more information about Feathers, return to the <a href="/feathers/start" class="wikilink1" title="feathers:start">Feathers Documentation</a>.
</p>

</div>
<!-- EDIT3 SECTION "Showing or hiding the header on drag" [2353-] -->