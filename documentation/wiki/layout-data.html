
<h1 class="sectionedit1" id="ilayoutdisplayobject_and_ilayoutdata">ILayoutDisplayObject and ILayoutData</h1>
<div class="level1">

<p>
Some layouts may allow developers to customize individual display objects by adding optional <em>layout data</em>. All Feathers components have a <code><a href="http://feathersui.com/documentation/feathers/layout/ILayoutDisplayObject.html#layoutData" class="urlextern" title="http://feathersui.com/documentation/feathers/layout/ILayoutDisplayObject.html#layoutData"  rel="nofollow">layoutData</a></code> property that can be used to specify additional information about the component that the parent container&#039;s layout can use for measurement and positioning.
</p>

<p>
<p><div class="noteclassic">
This document explains advanced layout features. It builds on the basics explained in <a href="/feathers/custom-layouts" class="wikilink1" title="feathers:custom-layouts">Introduction to Custom Feathers Layouts</a>.

</div></p>
</p>

<p>
<p><div class="noteclassic">
This document is a work in progress, and some sections are currently incomplete.

</div></p>
</p>

</div>
<!-- EDIT1 SECTION "ILayoutDisplayObject and ILayoutData" [1-717] -->
<h2 class="sectionedit2" id="ilayoutdisplayobject">ILayoutDisplayObject</h2>
<div class="level2">

<p>
Any display object that may implement the <code><a href="http://feathersui.com/documentation/feathers/layout/ILayoutDisplayObject.html" class="urlextern" title="http://feathersui.com/documentation/feathers/layout/ILayoutDisplayObject.html"  rel="nofollow">ILayoutDisplayObject</a></code> interface to support more advanced layout features when added as children of Feathers containers. The base <code><a href="http://feathersui.com/documentation/feathers/core/FeathersControl.html" class="urlextern" title="http://feathersui.com/documentation/feathers/core/FeathersControl.html"  rel="nofollow">FeathersControl</a></code> class implements this interface, so most custom components will automatically support the ability to specify layout data.
</p>

<p>
The <code>ILayoutDisplayObject</code> interface defines two properties and an event.
</p>

<p>
The <code><a href="http://feathersui.com/documentation/feathers/layout/ILayoutDisplayObject.html#includeInLayout" class="urlextern" title="http://feathersui.com/documentation/feathers/layout/ILayoutDisplayObject.html#includeInLayout"  rel="nofollow">includeInLayout</a></code> property may be set to <code>false</code> to tell a layout to completely ignore a display object. The object won&#039;t affect the measurement of the container and the layout won&#039;t position, resize, or otherwise transform the display object. This can be used to position a display object manually, but to keep it in the same container as other display objects that need to be in a layout.
</p>

<p>
The <code><a href="http://feathersui.com/documentation/feathers/layout/ILayoutDisplayObject.html#layoutData" class="urlextern" title="http://feathersui.com/documentation/feathers/layout/ILayoutDisplayObject.html#layoutData"  rel="nofollow">layoutData</a></code> property is used to set additional properties on the display object that are specific to the layout.
</p>

<p>
<code><a href="http://feathersui.com/documentation/feathers/layout/ILayoutDisplayObject.html#event:layoutDataChange" class="urlextern" title="http://feathersui.com/documentation/feathers/layout/ILayoutDisplayObject.html#event:layoutDataChange"  rel="nofollow">FeathersEventType.LAYOUT_DATA_CHANGE</a></code> should be dispatched by the display object when a property of the <code><a href="http://feathersui.com/documentation/feathers/layout/ILayoutData.html" class="urlextern" title="http://feathersui.com/documentation/feathers/layout/ILayoutData.html"  rel="nofollow">ILayoutData</a></code> object is changed. This is to inform the container that the layout may be affected by this change to the layout data. The display object should listen for <code><a href="http://feathersui.com/documentation/feathers/layout/ILayoutData.html#event:change" class="urlextern" title="http://feathersui.com/documentation/feathers/layout/ILayoutData.html#event:change"  rel="nofollow">Event.CHANGE</a></code> on the layout data to know when this event should be dispatched.
</p>

</div>
<!-- EDIT2 SECTION "ILayoutDisplayObject" [718-2639] -->
<h2 class="sectionedit3" id="ilayoutdata">ILayoutData</h2>
<div class="level2">

<p>
The <code><a href="http://feathersui.com/documentation/feathers/layout/ILayoutData.html" class="urlextern" title="http://feathersui.com/documentation/feathers/layout/ILayoutData.html"  rel="nofollow">ILayoutData</a></code> interface defines one required event and no properties or methods. Other properties will be specific to the layout.
</p>

<p>
<code><a href="http://feathersui.com/documentation/feathers/layout/ILayoutData.html#event:change" class="urlextern" title="http://feathersui.com/documentation/feathers/layout/ILayoutData.html#event:change"  rel="nofollow">Event.CHANGE</a></code> should be dispatched when the value any property of the layout data changes.
</p>

</div>
<!-- EDIT3 SECTION "ILayoutData" [2640-3055] -->
<h2 class="sectionedit4" id="example">Example</h2>
<div class="level2">

<p>
Let&#039;s expand on the example layout presented in <a href="/feathers/custom-layouts" class="wikilink1" title="feathers:custom-layouts">Introduction to Custom Feathers Layouts</a>. We&#039;d like to provide an <code>ILayoutData</code> implementation that allows us to set a <code>percentWidth</code> property for each item.
</p>

<p>
To begin, we&#039;ll implement <code>ILayoutData</code> with a new <code>SimpleVerticalLayoutData</code> class:
</p>
<pre class="code as3"><span class="kw4">package</span> feathersx<span class="sy0">.</span>layout
<span class="br0">&#123;</span>
	<span class="kw1">import</span> feathers<span class="sy0">.</span>layout<span class="sy0">.</span>ILayoutData<span class="sy0">;</span>
	<span class="kw1">import</span> starling<span class="sy0">.</span>events<span class="sy0">.</span><a href="http://www.google.com/search?q=eventdispatcher%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:eventdispatcher.html"><span class="kw5">EventDispatcher</span></a><span class="sy0">;</span>
&nbsp;
	<span class="br0">&#91;</span><a href="http://www.google.com/search?q=event%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:event.html"><span class="kw5">Event</span></a><span class="br0">&#40;</span><span class="kw7">name</span>=<span class="st0">&quot;change&quot;</span><span class="sy0">,</span><span class="kw7">type</span>=<span class="st0">&quot;starling.events.Event&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
&nbsp;
	<span class="kw1">public</span> <span class="kw4">class</span> SimpleVerticalLayoutData <span class="kw1">extends</span> <a href="http://www.google.com/search?q=eventdispatcher%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:eventdispatcher.html"><span class="kw5">EventDispatcher</span></a> implements ILayoutData
	<span class="br0">&#123;</span>
		<span class="kw1">public</span> <span class="kw3">function</span> SimpleVerticalLayoutData<span class="br0">&#40;</span><span class="br0">&#41;</span>
		<span class="br0">&#123;</span>
&nbsp;
		<span class="br0">&#125;</span>
&nbsp;
		<span class="kw1">protected</span> <span class="kw2">var</span> _percentWidth<span class="sy0">:</span><a href="http://www.google.com/search?q=number%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:number.html"><span class="kw5">Number</span></a> = <span class="kw8">NaN</span><span class="sy0">;</span>
&nbsp;
		<span class="kw1">public</span> <span class="kw3">function</span> <span class="kw1">get</span> percentWidth<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">:</span><a href="http://www.google.com/search?q=number%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:number.html"><span class="kw5">Number</span></a>
		<span class="br0">&#123;</span>
			<span class="kw1">return</span> <span class="kw1">this</span><span class="sy0">.</span>_percentWidth<span class="sy0">;</span>
		<span class="br0">&#125;</span>
&nbsp;
		<span class="kw1">public</span> <span class="kw3">function</span> <span class="kw1">set</span> percentWidth<span class="br0">&#40;</span><span class="kw7">value</span><span class="sy0">:</span><a href="http://www.google.com/search?q=number%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:number.html"><span class="kw5">Number</span></a><span class="br0">&#41;</span><span class="sy0">:</span><span class="kw1">void</span>
		<span class="br0">&#123;</span>
			<span class="kw1">if</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="sy0">.</span>_percentWidth == <span class="kw7">value</span><span class="br0">&#41;</span>
			<span class="br0">&#123;</span>
				<span class="kw1">return</span><span class="sy0">;</span>
			<span class="br0">&#125;</span>
			<span class="kw1">this</span><span class="sy0">.</span>_percentWidth = <span class="kw7">value</span><span class="sy0">;</span>
			<span class="kw1">this</span><span class="sy0">.</span>dispatchEventWidth<span class="br0">&#40;</span> <a href="http://www.google.com/search?q=event%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:event.html"><span class="kw5">Event</span></a><span class="sy0">.</span><span class="kw8">CHANGE</span> <span class="br0">&#41;</span><span class="sy0">;</span>
		<span class="br0">&#125;</span>
	<span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>

<p>
The class needs to extend <code><a href="http://doc.starling-framework.org/core/starling/events/EventDispatcher.html" class="urlextern" title="http://doc.starling-framework.org/core/starling/events/EventDispatcher.html"  rel="nofollow">starling.events.EventDispatcher</a></code> in order to be able to dispatch <code>Event.CHANGE</code> when its <code>percentWidth</code> property changes. The metadata for this event appears above the class definition. Obviously, we implement the <code>ILayoutData</code> interface.
</p>

<p>
The <code>percentWidth</code> getter and setter are also defined. The getter simply returns the <code>_percentWidth</code> member variable used to store the value. The setter checks if the value has changed. If so, it stores the new value in the <code>_percentWidth</code> member variable and then dispatches <code>Event.CHANGE</code>.
</p>

<p>
Notice that the member variable is initialized to <code>NaN</code>. We&#039;re going to use <code>isNaN()</code> in our layout to check if a display object&#039;s width should be set using <code>percentWidth</code> or if the existing width should be used as-is, like it is in the original class. We&#039;ll specify percentages in the range <code>0</code> to <code>100</code>.
</p>

<p>
If we want to pass this layout data to a Feathers component, we might do it like this:
</p>
<pre class="code as3"><span class="kw2">var</span> buttonLayoutData<span class="sy0">:</span>SimpleVerticalLayoutData = <span class="kw1">new</span> SimpleVerticalLayoutData<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
buttonLayoutData<span class="sy0">.</span>percentWidth = <span class="nu0">100</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">var</span> button<span class="sy0">:</span>Button = <span class="kw1">new</span> Button<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
button<span class="sy0">.</span>label = <span class="st0">&quot;Click Me&quot;</span><span class="sy0">;</span>
button<span class="sy0">.</span>layoutData = buttonLayoutData<span class="sy0">;</span>
<span class="kw1">this</span><span class="sy0">.</span><span class="kw7">addChild</span><span class="br0">&#40;</span> button <span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
Next, let&#039;s make some modifications to the <code>SimpleVerticalLayout</code> class in order to support this new layout data. We&#039;ll start by changing the <code>layout()</code> function a bit:
</p>
<pre class="code as3"><span class="kw2">var</span> maxItemWidth<span class="sy0">:</span><a href="http://www.google.com/search?q=number%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:number.html"><span class="kw5">Number</span></a> = <span class="nu0">0</span><span class="sy0">;</span>
<span class="kw2">var</span> itemCount<span class="sy0">:</span><a href="http://www.google.com/search?q=int%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:int.html"><span class="kw5">int</span></a> = items<span class="sy0">.</span><span class="kw7">length</span><span class="sy0">;</span>
<span class="kw1">for</span><span class="br0">&#40;</span><span class="kw2">var</span> i<span class="sy0">:</span><a href="http://www.google.com/search?q=int%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:int.html"><span class="kw5">int</span></a> = <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> itemCount<span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	<span class="kw2">var</span> item<span class="sy0">:</span><a href="http://www.google.com/search?q=displayobject%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:displayobject.html"><span class="kw5">DisplayObject</span></a> = items<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="sy0">;</span>
	<span class="co1">// skip items that aren't included in the layout</span>
	<span class="kw1">if</span><span class="br0">&#40;</span>item <span class="kw1">is</span> ILayoutDisplayObject <span class="sy0">&amp;&amp;</span> <span class="sy0">!</span>ILayoutDisplayObject<span class="br0">&#40;</span>item<span class="br0">&#41;</span><span class="sy0">.</span>includeInLayout<span class="br0">&#41;</span>
	<span class="br0">&#123;</span>
		<span class="kw1">continue</span><span class="sy0">;</span>
	<span class="br0">&#125;</span>
	<span class="co1">// special case for Feathers components</span>
	<span class="kw1">if</span><span class="br0">&#40;</span>item <span class="kw1">is</span> IFeathersControl<span class="br0">&#41;</span>
	<span class="br0">&#123;</span>
		IFeathersControl<span class="br0">&#40;</span>item<span class="br0">&#41;</span><span class="sy0">.</span>validate<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
	<span class="br0">&#125;</span>
&nbsp;
	<span class="co1">// used for the final content width below</span>
	maxItemWidth = <a href="http://www.google.com/search?q=math%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:math.html"><span class="kw5">Math</span></a><span class="sy0">.</span><span class="kw7">max</span><span class="br0">&#40;</span>maxItemWidth<span class="sy0">,</span> item<span class="sy0">.</span><span class="kw7">width</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw2">var</span> viewPortWidth<span class="sy0">:</span><a href="http://www.google.com/search?q=number%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:number.html"><span class="kw5">Number</span></a> = explicitWidth<span class="sy0">;</span>
<span class="kw2">var</span> viewPortHeight<span class="sy0">:</span><a href="http://www.google.com/search?q=number%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:number.html"><span class="kw5">Number</span></a> = explicitHeight<span class="sy0">;</span>
<span class="kw1">if</span><span class="br0">&#40;</span><span class="kw7">isNaN</span><span class="br0">&#40;</span>viewPortWidth<span class="br0">&#41;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	viewPortWidth = <a href="http://www.google.com/search?q=math%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:math.html"><span class="kw5">Math</span></a><span class="sy0">.</span><span class="kw7">max</span><span class="br0">&#40;</span>minWidth<span class="sy0">,</span> <a href="http://www.google.com/search?q=math%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:math.html"><span class="kw5">Math</span></a><span class="sy0">.</span><span class="kw7">min</span><span class="br0">&#40;</span>maxWidth<span class="sy0">,</span> maxItemWidth<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
<span class="kw1">if</span><span class="br0">&#40;</span><span class="kw7">isNaN</span><span class="br0">&#40;</span>explicitHeight<span class="br0">&#41;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	viewPortHeight = <a href="http://www.google.com/search?q=math%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:math.html"><span class="kw5">Math</span></a><span class="sy0">.</span><span class="kw7">max</span><span class="br0">&#40;</span>minHeight<span class="sy0">,</span> <a href="http://www.google.com/search?q=math%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:math.html"><span class="kw5">Math</span></a><span class="sy0">.</span><span class="kw7">min</span><span class="br0">&#40;</span>maxHeight<span class="sy0">,</span> positionY<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw2">var</span> positionY<span class="sy0">:</span><a href="http://www.google.com/search?q=number%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:number.html"><span class="kw5">Number</span></a> = startY<span class="sy0">;</span>
<span class="kw1">for</span><span class="br0">&#40;</span>i = <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> itemCount<span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	item = items<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="sy0">;</span>
	<span class="kw2">var</span> layoutItem<span class="sy0">:</span>ILayoutDisplayObject = item <span class="kw1">as</span> ILayoutDisplayObject<span class="sy0">;</span>
&nbsp;
	<span class="kw1">if</span><span class="br0">&#40;</span>layoutItem<span class="br0">&#41;</span>
	<span class="br0">&#123;</span>
		<span class="kw1">if</span><span class="br0">&#40;</span><span class="sy0">!</span>layoutItem<span class="sy0">.</span>includeInLayout<span class="br0">&#41;</span>
		<span class="br0">&#123;</span>
			<span class="kw1">continue</span><span class="sy0">;</span>
		<span class="br0">&#125;</span>
&nbsp;
		<span class="kw2">var</span> layoutData<span class="sy0">:</span>SimpleVerticalLayoutData = layoutItem<span class="sy0">.</span>layoutData <span class="kw1">as</span> SimpleVerticalLayoutData<span class="sy0">;</span>
		<span class="kw1">if</span><span class="br0">&#40;</span>layoutData<span class="br0">&#41;</span>
		<span class="br0">&#123;</span>
			<span class="kw2">var</span> percentWidth<span class="sy0">:</span><a href="http://www.google.com/search?q=number%20inurl:http://livedocs.adobe.com/flex/201/langref/%20inurl:number.html"><span class="kw5">Number</span></a> = layoutData<span class="sy0">.</span>percentWidth<span class="sy0">;</span>
			<span class="kw1">if</span><span class="br0">&#40;</span><span class="sy0">!</span><span class="kw7">isNaN</span><span class="br0">&#40;</span>percentWidth<span class="br0">&#41;</span><span class="br0">&#41;</span>
			<span class="br0">&#123;</span>
				<span class="co1">// change the item's width if percent width is a valid number</span>
				item<span class="sy0">.</span><span class="kw7">width</span> = viewPortWidth <span class="sy0">*</span> percentWidth <span class="sy0">/</span> <span class="nu0">100</span><span class="sy0">;</span>
			<span class="br0">&#125;</span>
		<span class="br0">&#125;</span>
	<span class="br0">&#125;</span>
	<span class="kw1">if</span><span class="br0">&#40;</span>item <span class="kw1">is</span> IFeathersControl<span class="br0">&#41;</span>
	<span class="br0">&#123;</span>
		IFeathersControl<span class="br0">&#40;</span>item<span class="br0">&#41;</span><span class="sy0">.</span>validate<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
	<span class="br0">&#125;</span>
	item<span class="sy0">.</span><span class="kw7">x</span> = startX<span class="sy0">;</span>
	item<span class="sy0">.</span><span class="kw7">y</span> = positionY<span class="sy0">;</span>
	positionY <span class="sy0">+</span>= item<span class="sy0">.</span><span class="kw7">height</span> <span class="sy0">+</span> <span class="kw1">this</span><span class="sy0">.</span>_gap<span class="sy0">;</span>
<span class="br0">&#125;</span></pre>

<p>
There are a number of changes, which might be a bit intimidating, but they&#039;re easier to digest individually.
</p>

<p>
First, you&#039;ll probably notice that the loop over the items has been changed into two loops. As before, in order to properly measure the width of the container, if the <code>explicitWidth</code> has not been specified in the <code>ViewPortBounds</code>, we first need to get the maximum width of an item. However, now we have the <code>percentWidth</code> values in each item&#039;s layout data. In order to calculate the width of each item as a percentage of the view port width, we need to split the loop into two and calculate <code>viewPortWidth</code> as soon as possible so that we can use it in the second loop.
</p>

<p>
In the second loop, in addition to checking <code>includeInLayout</code> if the item is an <code>ILayoutDisplayObject</code>, we now also try to use the <code><a href="http://feathersui.com/documentation/feathers/layout/ILayoutDisplayObject.html#layoutData" class="urlextern" title="http://feathersui.com/documentation/feathers/layout/ILayoutDisplayObject.html#layoutData"  rel="nofollow">layoutData</a></code> property. We cast its value as <code>SimpleVerticalLayoutData</code>, the class we defined previously. If the item has layout data, we check the value of <code>percentWidth</code> using <code>isNaN()</code>. If it&#039;s a valid numeric value, we change the display object&#039;s width by  multiplying the <code>viewPortWidth</code> variable by <code>percentWidth</code> and dividing by <code>100</code>. Once the width is set, we continue on with positioning like we did in the old version of this class. As we noted previously, we moved the calculation of <code>minItemWidth</code> to the first loop.
</p>

<p>
The <code>getScrollPositionForIndex()</code> function does not need to be changed. It is meant to be called after the <code>layout()</code> function, so the <code>percentWidth</code> values are already processed.
</p>

</div>
<!-- EDIT4 SECTION "Example" [3056-8716] -->
<h2 class="sectionedit5" id="related_links">Related Links</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="/feathers/custom-layouts" class="wikilink1" title="feathers:custom-layouts">Introduction to Custom Feathers Layouts</a></div>
</li>
</ul>

<p>
For more tutorials, return to the <a href="/feathers/start" class="wikilink1" title="feathers:start">Feathers Documentation</a>.
</p>

</div>
<!-- EDIT5 SECTION "Related Links" [8717-] -->